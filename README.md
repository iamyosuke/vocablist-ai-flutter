# Vocablist AI

FlutterとSupabaseを使用した語彙学習アプリケーション。

## セットアップ手順

1. Supabaseプロジェクトの作成
   - [Supabase](https://supabase.com)にアクセスし、新しいプロジェクトを作成
   - プロジェクトの`URL`と`anon key`をコピー

2. 環境変数の設定
   - `.env`ファイルを作成し、以下の内容を追加：
   ```
   SUPABASE_URL=your_supabase_url
   SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

3. データベーステーブルの作成
   - Supabaseのダッシュボードで、以下のSQLを実行：

```sql
-- words テーブルの作成
CREATE TABLE words (
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  word text NOT NULL,
  meaning text NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
  updated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())
);

-- memory_banks テーブルの作成
CREATE TABLE memory_banks (
  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  word_id bigint NOT NULL REFERENCES words(id),
  level integer NOT NULL DEFAULT 0,
  next_review_date timestamp with time zone NOT NULL,
  last_review_date timestamp with time zone NOT NULL,
  is_active boolean NOT NULL DEFAULT true,
  created_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
  updated_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now())
);

-- インデックスの作成
CREATE INDEX words_created_at_idx ON words (created_at DESC);
CREATE INDEX memory_banks_word_id_idx ON memory_banks (word_id);
CREATE INDEX memory_banks_next_review_date_idx ON memory_banks (next_review_date);
CREATE INDEX memory_banks_is_active_idx ON memory_banks (is_active);

-- RLSポリシーの設定
ALTER TABLE words ENABLE ROW LEVEL SECURITY;
ALTER TABLE memory_banks ENABLE ROW LEVEL SECURITY;

-- 認証済みユーザーのCRUD操作を許可
CREATE POLICY "Enable CRUD for authenticated users" ON words
  FOR ALL USING (auth.role() = 'authenticated')
  WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Enable CRUD for authenticated users" ON memory_banks
  FOR ALL USING (auth.role() = 'authenticated')
  WITH CHECK (auth.role() = 'authenticated');
```

4. アプリケーションの実行
```bash
flutter pub get
flutter run
```

## 主な機能

- 単語の追加：新しい単語とその意味を追加
- 単語リスト：追加した単語をカード形式で表示
- 単語の詳細：Markdown形式で意味を表示
- 音声読み上げ：単語の発音を確認
- メモリバンク：間隔復習システムによる効率的な学習
- オフライン対応：データはローカルとクラウドの両方に保存

## 技術スタック

- Flutter
- Supabase (バックエンド)
- flutter_markdown (Markdown表示)
- just_audio (音声再生)
- Provider (状態管理)

## メモリバンクシステム

記憶レベルに基づく復習間隔：
- レベル0: 4時間後
- レベル1: 1日後
- レベル2: 3日後
- レベル3: 1週間後
- レベル4: 2週間後
- レベル5: 1ヶ月後

正解すると1レベル上がり、不正解すると1レベル下がります。
